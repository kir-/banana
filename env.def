Bootstrap: docker
From: nvcr.io/nvidia/pytorch:22.08-py3
Stage: build

%files
    requirements.txt requirements.txt

%post
    /opt/conda/bin/conda init
    conda install libgcc
    conda install -c rdkit rdkit
    conda install -c dglteam dgl-cuda11.6
    pip install -r requirements.txt

%environment
    export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/opt/conda/lib

%runscript
    python $@
